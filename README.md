# vhr_springboot介绍：
### 1、本项目是一个小区物业的管理系统，是一个简单的练手项目，其功能模块有：
小区管理、楼栋管理、个人房产管理、人员管理、车辆管理、车位、车位使用管理、报修管理、投诉管理、收费项目、明细管理、资产设备、
管理员、用户组、权限管理。其中角色分为超级管理员和普通管理员两种，超级管理员拥有最高级的权限，可以管理系统一切的功能模块；
普通管理员可以拥有超级管理员设置的可允许使用的模块。
### 2、使用技术有：
**后端框架**：springboot，**持久层框架**：mybatis、mybatis-plus，**中间件**：redis单机版，**安全权鉴框架**：springsecurity，
**数据库**：mysql；**视图层**：thymeleaf、**前端**：HTML+CSS+JS。
### 3、系统设计：
**1)、接口**：对于仅使用单表的数据直接使用mybatis-plus，对于需要其他模块的数据如楼栋精确查询可根据小区列表查询，这时需要多表数据，故
使用mybatis且使用mysql的左连接去进行多表查询；需要注意的是：所有模块的service层都是独立的(就是每个模块的service实现类都只有
该表的操作，方便后续引入中间件且解耦)，因此每个接口使用别的模块的数据需要注入该模块的service；对于需要接收图片上传的接口，需要使用
@ResponseBody注解并把操作结果用字符串返给前端(因前端没有使用ajax提交而是使用传统的form表单提交，这样会无法使用弹窗等交互)，其他
接口不需要此注解。<br>
**2)、service层**：service使用了redis中间件作为此项目的缓存，缓存可以缓解数据库压力，提高系统性能，但引入中间件就会带来一些问题，首先
是redis的雪崩问题(由于该系统用于公司内部使用，并发量不会太大且不对外开放，因此redis其他常见问题可忽略)，为解决雪崩问题项目中引入了自定义
工具类 'MakeUtil'中的redisttl方法，该方法设置了一个random函数使传进来的数字可以和随机值相加，这里设置了3分钟以内的随机值；这样就可以
大大降低雪崩发生的概率；其次引入redis会有一个同步的问题，为解决这个问题引入了aop去包围每个service层的增删改操作，并启动一个子线程去
执行设计的‘双删策略’；缓存时间方案，对于经常需要更新的数据会选择3+3分钟左右，其余为一星期+3左右。<br>
**3)、权鉴问题**：对于系统的安全权鉴问题，使用了springsecurity框架，此框架可以通过filter链去鉴权，其中可以在yaml项目配置文件配置系统
忽略权鉴的路径(即公开路径，无权限路径)，需要注意的是，这里并没有使用restful的规定，而是只有get和post两种请求；其余可以根据数据库角色
所设置的权限去执行；除此之外，使用了jwt对认证的用户进行签发token并保存在cookie，该tooken设置过期时间为一星期。<br>
**4)、redis设计**：redis使用类型多数为<String,Object>的HashMap，部分welcome数据统计使用String类型。<br>
### 4、数据库设计：
**1)、多数据源**：使用了两个数据库，一个存放管理员权鉴信息、一个存放系统模块的信息。<br>
**2)、字段**：一些如性别、状态使用了tinyint，在后端处用枚举绑定。<br>
